<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Orders</title>

    <link rel="stylesheet" href="https://kendo.cdn.telerik.com/2022.2.621/styles/kendo.default-v2.min.css" />

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://kendo.cdn.telerik.com/2022.2.621/js/kendo.all.min.js"></script>
</head>

<body>

    <style>
        .k-grid {
            /* width: 500px; */
            font-size: 12px;
            font-family: Arial, Helvetica, sans-serif;
        }
    </style>

    <div id="aggregate_order_table"></div>

    <script>
        // sample datasource
        var aggregate_order_records = [{'symbol': 'CTG', 'refer_price': 27650.0, 'total_trading': 300.0, 'total_buy': 300.0, 'total_sell': 0.0, 'phi': -7955, 'thue': -795500.0, 'PNL': -7962955, 'avg_buy_price': '26517', 'avg_sell_price': '', 'buy_to_basic': '-4.1', 'sell_to_basic': ''}, {'symbol': 'E1VFVN30', 'refer_price': 17700.0, 'total_trading': 100.0, 'total_buy': 100.0, 'total_sell': 0.0, 'phi': -1715, 'thue': -171500.0, 'PNL': -1716715, 'avg_buy_price': '17150', 'avg_sell_price': '', 'buy_to_basic': '-3.1', 'sell_to_basic': ''}, {'symbol': 'FUESSVFL', 'refer_price': 14880.0, 'total_trading': 100.0, 'total_buy': 100.0, 'total_sell': 0.0, 'phi': -1440, 'thue': -144000.0, 'PNL': -1441440, 'avg_buy_price': '14400', 'avg_sell_price': '', 'buy_to_basic': '-3.2', 'sell_to_basic': ''}, {'symbol': 'HDB', 'refer_price': 17000.0, 'total_trading': 100.0, 'total_buy': 200.0, 'total_sell': -100.0, 'phi': -4940, 'thue': -329165.0, 'PNL': -1614940, 'avg_buy_price': '16375', 'avg_sell_price': '16650', 'buy_to_basic': '-3.7', 'sell_to_basic': '-2.1'}, {'symbol': 'HPG', 'refer_price': 18350.0, 'total_trading': -100.0, 'total_buy': 300.0, 'total_sell': -400.0, 'phi': -12280, 'thue': -529060.0, 'PNL': 1827720, 'avg_buy_price': '17400', 'avg_sell_price': '17650', 'buy_to_basic': '-5.2', 'sell_to_basic': '-3.8'}, {'symbol': 'HSG', 'refer_price': 11800.0, 'total_trading': 300.0, 'total_buy': 300.0, 'total_sell': 0.0, 'phi': -3355, 'thue': -335500.0, 'PNL': -3358355, 'avg_buy_price': '11183', 'avg_sell_price': '', 'buy_to_basic': '-5.2', 'sell_to_basic': ''}, {'symbol': 'MBB', 'refer_price': 17750.0, 'total_trading': 300.0, 'total_buy': 300.0, 'total_sell': 0.0, 'phi': -5105, 'thue': -510500.0, 'PNL': -5110105, 'avg_buy_price': '17017', 'avg_sell_price': '', 'buy_to_basic': '-4.1', 'sell_to_basic': ''}, {'symbol': 'MSB', 'refer_price': 12600.0, 'total_trading': 200.0, 'total_buy': 200.0, 'total_sell': 0.0, 'phi': -2425, 'thue': -242500.0, 'PNL': -2427425, 'avg_buy_price': '12125', 'avg_sell_price': '', 'buy_to_basic': '-3.8', 'sell_to_basic': ''}, {'symbol': 'NT2', 'refer_price': 28700.0, 'total_trading': 0.0, 'total_buy': 500.0, 'total_sell': -500.0, 'phi': -28250, 'thue': -1409300.0, 'PNL': 321750, 'avg_buy_price': '27900', 'avg_sell_price': '28600', 'buy_to_basic': '-2.8', 'sell_to_basic': '-0.3'}, {'symbol': 'PAN', 'refer_price': 15650.0, 'total_trading': 400.0, 'total_buy': 400.0, 'total_sell': 0.0, 'phi': -5970, 'thue': -597000.0, 'PNL': -5975970, 'avg_buy_price': '14925', 'avg_sell_price': '', 'buy_to_basic': '-4.6', 'sell_to_basic': ''}, {'symbol': 'POW', 'refer_price': 10950.0, 'total_trading': 200.0, 'total_buy': 200.0, 'total_sell': 0.0, 'phi': -2110, 'thue': -211000.0, 'PNL': -2112110, 'avg_buy_price': '10550', 'avg_sell_price': '', 'buy_to_basic': '-3.7', 'sell_to_basic': ''}, {'symbol': 'PVT', 'refer_price': 21500.0, 'total_trading': 0.0, 'total_buy': 100.0, 'total_sell': -100.0, 'phi': -4155, 'thue': -208095.0, 'PNL': 30845, 'avg_buy_price': '20600', 'avg_sell_price': '20950', 'buy_to_basic': '-4.2', 'sell_to_basic': '-2.6'}, {'symbol': 'TCB', 'refer_price': 27600.0, 'total_trading': 400.0, 'total_buy': 400.0, 'total_sell': 0.0, 'phi': -10530, 'thue': -1053000.0, 'PNL': -10540530, 'avg_buy_price': '26325', 'avg_sell_price': '', 'buy_to_basic': '-4.6', 'sell_to_basic': ''}, {'symbol': 'VHM', 'refer_price': 49800.0, 'total_trading': 0.0, 'total_buy': 300.0, 'total_sell': -300.0, 'phi': -28935, 'thue': -1448595.0, 'PNL': 226065, 'avg_buy_price': '47800', 'avg_sell_price': '48650', 'buy_to_basic': '-4.0', 'sell_to_basic': '-2.3'}, {'symbol': 'VOS', 'refer_price': 10850.0, 'total_trading': 100.0, 'total_buy': 200.0, 'total_sell': -100.0, 'phi': -3095, 'thue': -205550.0, 'PNL': -998095, 'avg_buy_price': '10225', 'avg_sell_price': '10500', 'buy_to_basic': '-5.8', 'sell_to_basic': '-3.2'}, {'symbol': 'VPB', 'refer_price': 18350.0, 'total_trading': 300.0, 'total_buy': 300.0, 'total_sell': 0.0, 'phi': -5275, 'thue': -527500.0, 'PNL': -5280275, 'avg_buy_price': '17583', 'avg_sell_price': '', 'buy_to_basic': '-4.2', 'sell_to_basic': ''}];

        $(document).ready(function() {
            $("#aggregate_order_table").kendoGrid({
                dataSource: {
                    data: aggregate_order_records,
                    //pageSize: 5,
                    schema: {
                        model: {'fields': {'symbol': {}, 'refer_price': {'type': 'number'}, 'total_trading': {'type': 'number'}, 'total_buy': {'type': 'number'}, 'total_sell': {'type': 'number'}, 'phi': {'type': 'number'}, 'thue': {'type': 'number'}, 'PNL': {'type': 'number'}, 'avg_buy_price': {}, 'avg_sell_price': {}, 'buy_to_basic': {}, 'sell_to_basic': {}}}
                    },
                    aggregate: [{'field': 'PNL', 'aggregate': 'sum'}, {'field': 'phi', 'aggregate': 'sum'}, {'field': 'thue', 'aggregate': 'sum'}, {'field': 'total_trading', 'aggregate': 'sum'}]
                },
                //sortable: true,
                //pageable: true,
                filterable: true,
                sortable: {
                    mode: "multiple"
                },
                dataBound: function() {
                    for (var i = 0; i < this.columns.length; i++) {
                        this.autoFitColumn(i);
                    }
                },
                toolbar: ["TCBS T0 Orders at 2022-12-26 14:32:07.475813", "search"],
                search: {
                    fields: [
                        { name: "symbol", operator: "contains" },
                    ]
                },
                columns: [{'field': 'symbol', 'title': 'symbol', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}}, {'field': 'refer_price', 'title': 'refer_price', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(refer_price)#'}, {'field': 'total_trading', 'title': 'total_trading', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(total_trading)#', 'footerTemplate': '#: kendo.format("{0:n0}",sum) #'}, {'field': 'total_buy', 'title': 'total_buy', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(total_buy)#'}, {'field': 'total_sell', 'title': 'total_sell', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(total_sell)#'}, {'field': 'phi', 'title': 'phi', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(phi)#', 'footerTemplate': '#: kendo.format("{0:n0}",sum) #'}, {'field': 'thue', 'title': 'thue', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(thue)#', 'footerTemplate': '#: kendo.format("{0:n0}",sum) #'}, {'field': 'PNL', 'title': 'PNL', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}, 'format': '{0:n0}', 'template': '#=SetColor(PNL)#', 'footerTemplate': '#: kendo.format("{0:n0}",sum) #'}, {'field': 'avg_buy_price', 'title': 'avg_buy_price', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}}, {'field': 'avg_sell_price', 'title': 'avg_sell_price', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}}, {'field': 'buy_to_basic', 'title': 'buy_to_basic', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}}, {'field': 'sell_to_basic', 'title': 'sell_to_basic', 'attributes': {'style': 'text-align: right'}, 'filterable': {'multi': 'true'}}],
            });
        });

        function SetColor(value)
        {
            if(value<0)
                return "<font color=\"red\">"+kendo.format("{0:n1}", value)+"</font>";
            else if (value>0)
                return "<font color=\"green\">"+kendo.format("{0:n1}", value)+"</font>";
            else
                return value
        }
    </script>
</body>

</html>